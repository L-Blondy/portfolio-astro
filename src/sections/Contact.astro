---
import FormMutation from 'src/components/FormMutation.astro';
---

<FormMutation method="post" action="/contact.json" id="contactForm">
   <input type="email" name="email" class="border" />
   <input type="text" name="fullName" class="border" />
   <textarea
      class="border"
      name="message"
      rows={10}
      minlength="20"
      maxlength="2000"
      required></textarea>
   <button>Submit</button>
</FormMutation>

<script>
   (function () {
      const form = document.getElementById('contactForm');
      if (!form) return;
      form.addEventListener('submit', (e) => {
         console.log('submit', e);
      });
      form.addEventListener('success', (e) => {
         console.log('success', e);
      });
      form.addEventListener('failure', (e) => {
         console.log('failure', e);
      });
   })();
</script>
